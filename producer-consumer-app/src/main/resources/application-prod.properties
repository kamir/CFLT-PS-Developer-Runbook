# ==============================================================================
# PROD Environment — Confluent Cloud (dedicated cluster, PCI-DSS zone)
# ==============================================================================
# This file is managed via GitOps. Changes require PR approval.
# Secrets are NEVER stored here — they are injected at runtime via
# Kubernetes Secrets backed by HashiCorp Vault.
#
# PCI-DSS Requirements addressed:
#   Req 2  — No vendor-supplied defaults
#   Req 4  — Encrypt transmission (SASL_SSL)
#   Req 6  — Develop secure systems (idempotent producer, exactly-once)
#   Req 10 — Track and monitor access (client.id for audit trail)

bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS}
security.protocol=SASL_SSL
sasl.mechanism=PLAIN
sasl.jaas.config=${KAFKA_SASL_JAAS_CONFIG}

# Schema Registry
schema.registry.url=${SCHEMA_REGISTRY_URL}
basic.auth.credentials.source=USER_INFO
schema.registry.basic.auth.user.info=${SCHEMA_REGISTRY_USER_INFO}

# --- Producer: maximum durability ---
acks=all
retries=10
enable.idempotence=true
max.in.flight.requests.per.connection=5
delivery.timeout.ms=120000
request.timeout.ms=30000

# --- Consumer: exactly-once processing ---
auto.offset.reset=earliest
enable.auto.commit=false
isolation.level=read_committed

# --- Monitoring / Audit ---
client.id=payment-app-prod
metric.reporters=org.apache.kafka.common.metrics.JmxReporter
